<div ng-if="!sc.initError" class="row">
  <div class="col-md-offset-3 col-md-6">
    <form class="form-horizontal" novalidate>
      <div align="center" class="form-group">
        <h2>{{sc.survey.name}}<button ng-if="sc.survey.creator !== sc.user.username && sc.user.username !== 'admin'" type="button" class="btn btn-primary btn-danger btn-xs pull-right" ng-click="sc.reportSurvey()"><span class="glyphicon glyphicon-exclamation-sign"></span></button></h2>
        <hr>
        <h3>{{sc.survey.description}}</h3>
      </div>

      <hr>

      <div ng-repeat="question in sc.survey.questions track by $index" ng-init="questionIndex = $index">
        <div class="form-group">
          <label for="question{{questionIndex + 1}}"> {{questionIndex + 1}}. {{question.content}}</label>

          <div ng-if="!question.hasMultipleOptions">
            <div class="radio" ng-repeat="answer in question.answers track by $index" ng-init="radioAnswerIndex = $index">
              <label>
                <input type="radio" name="question{{questionIndex + 1}}answer{{radioAnswerIndex + 1}}" id="question{{questionIndex + 1}}answer{{radioAnswerIndex + 1}}" ng-value="{{answer.id}}" ng-model="sc.surveyResult.results[questionIndex].answerId"> {{answer.content}}
              </label>
            </div>

            <div ng-if="question.hasOtherOption" class="radio">
              <label>
                <input type="radio" name="question{{questionIndex + 1}}answerOther" id="question{{questionIndex + 1}}answerOther" ng-value="0" ng-model="sc.surveyResult.results[questionIndex].answerId"> Your option
                <input type="text" name="question{{questionIndex + 1}}answerOther" id="question{{questionIndex + 1}}answerOther" class="form-control" placeholder="Please provide your option..." ng-model="sc.surveyResult.results[questionIndex].optional">
              </label>
            </div>
          </div>

          <div ng-if="question.hasMultipleOptions">
            <div class="checkbox" ng-repeat="answer in question.answers track by $index" ng-init="checkboxAnswerIndex = $index">
              <label>
                <input type="checkbox" name="question{{questionIndex + 1}}answer{{checkboxAnswerIndex + 1}}" id="question{{questionIndex + 1}}answer{{checkboxAnswerIndex + 1}}" ng-value="true" ng-model="sc.surveyResult.results[questionIndex].resultList[checkboxAnswerIndex].isChecked"> {{answer.content}}
              </label>
            </div>
          </div>
        </div>

        <hr>
      </div> 

      <div id="captcha-survey" align="center" class="form-group"></div>

      <div class="alert alert-danger alert-dismissible" role="alert" ng-if="sc.error">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="sc.error = ''"><span aria-hidden="true">&times;</span></button>
        <strong>Error:</strong> {{sc.error}}
      </div>

      <hr>

      <div align="center" class="form-group">
        <button type="submit" class="btn btn-default btn-success" ng-click="sc.checkCaptcha()">Submit <span class="glyphicon glyphicon-check"></span></button>
      </div>
    </form>
  </div>
</div>

<div class="alert alert-danger" role="alert" ng-if="sc.initError">
  <strong>Error:</strong> {{sc.initError}} <a href="#/" class="alert-link">Go to Tech9 Survey</a>
</div>